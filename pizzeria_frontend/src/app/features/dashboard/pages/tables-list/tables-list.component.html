<h1>Mesas</h1>


<div class="row row-cols-1 row-cols-md-5 g-4">
  <div class="col" *ngFor="let table of tablesInterface">
    <div class="card h-60">
      <p class="d-flex align-items-center">

        <a class="p-3 d-inline-flex focus-ring focus-ring-secondary py-1 px-2 text-decoration-none border rounded-2"
           [ngClass]="{'text-bg-success': table.status === 'Disponible', 'text-bg-danger': table.status === 'Ocupado'}">
          {{ table.status }}
        </a>

        <button type="button" class="btn btn-warning ms-auto" data-bs-toggle="modal" data-bs-target="#showDetails" [ngClass]="{'disabled': table.status === 'Disponible'}" (click)="getOrderDetails(table.id_orders, table.id_tables)">
          <i class="bi bi-eye-fill"></i>
        </button>

      </p>
      <img src="assets/mesas-dos.jpg" class="card-img-top" width="100" height="100" alt="...">
      <div class="card-body">
        <h4>Mesa n√∫mero: {{ table.table_number }}</h4>
        <a class="btn btn-warning" 
        (click)="setIdTable(table.table_number)"
        [routerLink]="['/orderPayment']"
        [ngClass]="{'disabled': table.status === 'Ocupado'}"
        routerLinkActive="router-link-active">Ocupar mesa</a>
      </div>
    </div>
  </div>
</div>

<!-- Modal para reflejar los detalles de la orden asociada a la mesa ocupada -->
<div class="modal fade modal-lg" id="showDetails" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <h1 class="modal-title text-center text-dark" id="staticBackdropLabel">Detalles de la orden</h1>
      <div class="modal-header bg-light">
        <table class="table table-striped">
          <thead>
            <tr>
              <th>insumos</th>
              <th>precio unitario</th>
              <th>cantidades</th>
              <th>descriptiones</th>
            </tr>
          </thead>
          <tbody>
  
            <tr *ngFor="let item of orderDetailsRes;">
              <td>{{item.name}}</td>
              <td>{{item.unit_price}}</td>
              <td>{{item.amount}}</td>
              <td>{{item.description}}</td>
            </tr>

          </tbody>
          <div style="margin-top: 15px;">
            <strong style="font-size: 1.2em;">Total:</strong>
            <span style="font-size: 1.4em; color: rgb(255, 81, 0); font-weight: bold;">
                {{ orderTotal}}
            </span>
        </div>
          <button class="btn btn-danger mt-2 bi bi-stripe" (click)="orderPayment()" type="button"> Pagar</button>
          <span> | </span>

          <button class="btn btn-primary mt-2 bi bi-pencil" type="button"
          (click)="setIdTable(tableIdForDetails)"
          [routerLink]="['/update-Order']" routerLinkActive="router-link-active"
          data-bs-dismiss="modal"> Agregar insumos</button>

        </table>
        

        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-success" data-bs-dismiss="modal">Aceptar</button>
        
      </div>
    </div>
  </div>
</div>
<router-outlet />
